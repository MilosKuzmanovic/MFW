<ion-header>
  <ion-toolbar>
    <ion-title>{{ 'trainings.adding' | translate }}</ion-title>
    <ion-buttons slot="end">
      <app-language-switcher></app-language-switcher>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="trainingDetails">
  <ion-alert trigger="back-alert" [header]="'alert.cancelChanges' | translate" [buttons]="alertButtons"></ion-alert>

  <ion-button id="back-alert" color="danger" expand="full">{{ 'button.cancel' | translate }}</ion-button>

  <ion-card style="color: white; background-color: rgb(55, 47, 47);">
    <ion-card-content>
      <h1><b>{{ 'text.training' | translate }} {{ trainingDetails.name }}</b></h1>
      <ion-input fill="outline" style="margin-top: 15px;" [(ngModel)]="trainingDetails.name"
        [placeholder]="'placeholder.trainingName' | translate"></ion-input>
      <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="trainingDetails.description"
        [placeholder]="'placeholder.trainingDescription' | translate"></ion-input>
      <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="trainingDetails.breakBetweenGroups"
        [placeholder]="'placeholder.breakBetweenGroups' | translate"></ion-input>
      <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="trainingDetails.breakBetweenSeries"
        [placeholder]="'placeholder.breakBetweenSeries' | translate"></ion-input>
      <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="trainingDetails.breakBetweenExercises"
        [placeholder]="'placeholder.breakBetweenExercises' | translate"></ion-input>

      <ion-card color="light" *ngFor="let group of trainingDetails.trainingGroups">
        <ion-card-content>
          <div style="display: flex; justify-content: flex-end;">
            <ion-button color="danger" (click)="removeGroup(group)">
              <ion-icon size="large" name="trash-outline"></ion-icon>
            </ion-button>
          </div>

          <h1><b>{{ 'text.group' | translate }} {{ group.name }}</b></h1>
          <ion-input fill="outline" style="margin-top: 15px;" [(ngModel)]="group.name"
            [placeholder]="'placeholder.groupName' | translate"></ion-input>
          <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="group.description"
            [placeholder]="'placeholder.groupDescription' | translate"></ion-input>
          <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="group.time"
            [placeholder]="'placeholder.exerciseDuration' | translate"></ion-input>
          <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="group.numberOfSeries"
            [placeholder]="'placeholder.numberOfSeries' | translate"></ion-input>
          <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="group.order"
            [placeholder]="'placeholder.groupOrder' | translate"></ion-input>

          <ion-card color="warning" *ngFor="let exercise of group.exercises">
            <ion-card-content>
              <div style="display: flex; justify-content: flex-end;">
                <ion-button color="danger" (click)="removeExercise(exercise, group)">
                  <ion-icon size="large" name="trash-outline"></ion-icon>
                </ion-button>
              </div>

              <h1><b>{{ 'text.exercise' | translate }} {{ exercise.name }}</b></h1>
              <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="exercise.name"
                [placeholder]="'placeholder.exerciseName' | translate"></ion-input>
              <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="exercise.description"
                [placeholder]="'placeholder.exerciseDescription' | translate"></ion-input>
              <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="exercise.order"
                [placeholder]="'placeholder.exerciseOrder' | translate"></ion-input>
              <ion-input fill="outline" style="margin-top: 5px;" [(ngModel)]="exercise.time"
                [value]="group.time" [placeholder]="'placeholder.exerciseDuration' | translate"></ion-input>
            </ion-card-content>
          </ion-card>

          <ion-button expand="full" color="warning" (click)="addExercise(group)">{{ 'button.addExercise' | translate }}</ion-button>
        </ion-card-content>
      </ion-card>

      <ion-button color="light" expand="full" (click)="addGroup()">{{ 'button.addGroup' | translate }}</ion-button>
    </ion-card-content>
  </ion-card>

  <ion-button expand="full" (click)="saveTraining()">{{ 'button.save' | translate }}</ion-button>
</ion-content>